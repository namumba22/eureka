version: '3'

services:

   eureka:
     container_name: eureka
     image: netflixoss/eureka:1.3.1
     volumes:
       - ./eureka/config.properties:/tomcat/webapps/eureka/WEB-INF/classes/config.properties
       - ./eureka/eureka-client-test.properties:/tomcat/webapps/eureka/WEB-INF/classes/eureka-client-test.properties
       - ./eureka/eureka-client.properties:/tomcat/webapps/eureka/WEB-INF/classes/eureka-client.properties
       - ./eureka/eureka-server-test.properties:/tomcat/webapps/eureka/WEB-INF/classes/eureka-server-test.properties
       - ./eureka/eureka-server.properties:/tomcat/webapps/eureka/WEB-INF/classes/eureka-server.properties
     ports:
       - "8081:8080"
#       - "8001:8001"

   aggregator:
     container_name: aggregator
     image: lwieske/java-8:server-jre-8u121-slim
     depends_on:
       - eureka
     volumes:
       - ../aggregator/target/aggregator-0.5-SNAPSHOT.jar:/app/aggregator.jar
       - ./app_log:/app/log/
     ports:
       - "8080:8086"
     command: ["java", "-jar", "/app/aggregator.jar", "&>>", "/app/log/csd-console.log &"]

   discount:
     container_name: discount
     image: lwieske/java-8:server-jre-8u121-slim
     depends_on:
       - eureka
     volumes:
       - ../discount/target/discount-0.5-SNAPSHOT.jar:/app/discount.jar
       - ./app_log:/app/log/
#     ports:
#       - "8083:8083"
     command: ["java", "-jar", "/app/discount.jar", "&>>", "/app/log/csd-console.log &"]

   multiple-devide:
     container_name: multiple-devide
     image: lwieske/java-8:server-jre-8u121-slim
     depends_on:
       - eureka
     volumes:
       - ../multiple-devide/target/multiple-devide-0.5-SNAPSHOT.jar:/app/multiple-devide.jar
       - ./app_log:/app/log/
#     ports:
#       - "8081:8081"
     command: ["java", "-jar", "/app/multiple-devide.jar", "&>>", "/app/log/csd-console.log &"]

   plus-minus:
     container_name: plus-minus
     image: lwieske/java-8:server-jre-8u121-slim
     depends_on:
       - eureka
     volumes:
       - ../plus-minus/target/plus-minus-0.5-SNAPSHOT.jar:/app/plus-minus.jar
       - ./app_log:/app/log/
#     ports:
#       - "8082:8082"
     command: ["java", "-jar", "/app/plus-minus.jar", "&>>", "/app/log/csd-console.log &"]
#
   rounder:
     container_name: rounder
     image: lwieske/java-8:server-jre-8u121-slim
     depends_on:
       - eureka
     volumes:
       - ../rounder/target/rounder-0.5-SNAPSHOT.jar:/app/rounder.jar
       - ./app_log:/app/log/
#     ports:
#       - "8084:8084"
     command: ["java", "-jar", "/app/rounder.jar", "&>>", "/app/log/csd-console.log &"]

   tax:
     container_name: tax
     image: lwieske/java-8:server-jre-8u121-slim
     depends_on:
       - eureka
     volumes:
       - ../tax/target/tax-0.5-SNAPSHOT.jar:/app/tax.jar
       - ./app_log:/app/log/
#     ports:
#       - "8085:8085"
     command: ["java", "-jar", "/app/tax.jar", "&>>", "/app/log/csd-console.log &"]



